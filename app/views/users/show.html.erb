<div class="container">
  <div class="row">
    <h3><%= @user.name %>さんのプロフィール</h3>
      <div class="col-md-3">
       <h5>マイプロフィール</h5>
       <div class="row">
       <% if current_user != @user %>
       <!--フォローボタンor編集ボタン-->
         <%= render "relationships/form", user: @user %>
       <% else %>
         <%= link_to "編集する",edit_user_path(@user), class:"btn btn-success" %>
       <% end %>
       <table class="table">
         <%= image_tag @user.get_profile_image, size:'50x50' %>
         <tr>
          <th>名前</th>
          <th><%= @user.name %></th>
         </tr>
         <tr>
          <th>自己紹介</th>
          <th><%= @user.introduction %></th>
         </tr>
         <tr>
           <th>フォロー数：</th>
           <th><%= link_to @user.followings.count, user_followings_path(@user) %></th>
         </tr>
         <tr>
           <th>フォロワー数：</th>
           <th><%= link_to @user.followers.count, user_followers_path(@user) %></th>
         </tr>
       </table>
     </div>

     <div class="col-md-8 offset-md-1">
       <!--ソート機能-->
       <span><%= link_to "新着順",user_path(sort: "new_arrival_order"), class: "btn btn-sm btn-link" %></span>
       <span>|</span>
       <span><%= link_to "投稿順",user_path(sort: "posting_order"), class: "btn btn-sm btn-link" %></span>
       <span>|</span>
       <span><%= link_to "高評価順",user_path(sort: "highly_rated"), class: "btn btn-sm btn-link" %></span>
       <span>|</span>
       <span><%= link_to "低評価順",user_path(sort: "low_rating"), class: "btn btn-sm btn-link"  %></span>
       
       <h5>マイ読書レビュー</h5>
       <% if current_user != @user %>
       <% else %>
         <%= link_to "本の新規レビュー作成",new_book_path, class:"btn btn-primary" %>
       <% end %>
         <% @books.each do |book| %>
          <table class="table table-borderless">
            <% if book.book_image.attached? %>
              <%= image_tag book.book_image, size: "50x50" %>
            <% else %>
              <%= image_tag 'no_image', size: "50x50" %>
            <% end %>
            <tr>
              <td>タイトル：<%= book.title %></td>
            </tr>
            <tr>
              <td>著者：<%= book.author %></td>
            <tr>
              <td>ジャンル：<%= book.genre %></td>
            </tr>
            <tr>
              <td>評価：<%= render "books/static_rate", book: book %></td>
            </tr>
            <tr>
              <td>本の説明：<%=book.body %></td>
            </tr>
            <tr>
              <td>投稿日：<%=book.created_at.strftime("%Y/%m/%d") %></td>
            </tr>
            <tr>
              <td>
                いいね数：<%= book.favorites.count %>
              </td>
            </tr>
            <tr>
              <td>
                コメント数：
                <%= link_to book_path(book) do %>
                  <%= render "book_comments/count", book: book %>
                <% end %>
              </td>
            </tr>
            <tr>
              <% if @user.id == current_user.id %>
              <td>
                <%= link_to "編集", edit_book_path(book), class:"btn btn-success" %>
                <%= link_to "削除", book_path(book), method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-danger" %>
              </td>
              <% end %>
            </tr>
          </table>
         <% end %>
     </div>
  </div>
</div>
<!--ページネーション-->
<div class="d-flex justify-content-center"><%= paginate @books %></div>