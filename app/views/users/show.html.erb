<div class="container main-visual">
    <div class="row justify-content-center">
        <h3 class="p-5"><span class="header"><%= @user.name %>さんのプロフィール</span></h3>
    </div>
    <div class="row mt-3">
        <div class="col-md-12">
           <h5><span class="sub-title">■■■プロフィール■■■</span></h5>
        </div>
        <div class="col-md-12 mt-3">
          <p>
            <% if current_user != @user %>
            <!--フォローボタンor編集ボタン-->
              <%= render "relationships/form", user: @user%>
            <% else %>
              <%= link_to "編集する",edit_user_path(@user), class:"btn btn-outline-success btn-sm" %>
            <% end %>
            <!-- current_userと@userが一致していない場合に`チャット`を表示 -->
            <% if current_user != @user %>
              <%= link_to 'チャット', chat_path(@user.id), class:"btn btn-outline-primary btn-sm" %>
            <% end %>
          </p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2 offset-3 mt-3">
            <%= image_tag @user.get_profile_image, size:'120x140', class:"shadow-lg" %>
        </div>
        <div class="col-md-7 mt-3">
            <ul>
              <li class="mb-3 list-unstyled"><strong><i class="fas fa-user"></i>   <%= @user.name %></strong></li>
              <li class="mb-3 list-unstyled"><strong>自己紹介：</strong><%= @user.introduction %></li>
              <li class="mb-3 list-unstyled"><strong>フォロー：<%= link_to @user.followings.count, user_followings_path(@user) %></strong></li>
              <li class="mb-3 list-unstyled"><strong>フォロワー：<%= link_to @user.followers.count, user_followers_path(@user) %></strong></li>
            </ul>
        </div>
  　</div>


    <div class="row mt-5">
        <div class="col-md-12">
          <h5><span class="sub-title">■■■マイ読書レビュー■■■</span></h5>
        </div>
    </div>
    <div class="row mt-3 mb-3">
        <div class="col-md-6 text-left">
           <% if current_user != @user %>
           <% else %>
             <%= link_to "本の新規レビュー作成",new_book_path, class:"btn btn-outline-primary" %>
           <% end %>
        </div>
        <div class="col-md-6 text-right">
            <!--ソート機能-->
           <span><%= link_to "新着順",user_path(sort: "new_arrival_order"), class: "btn btn-sm btn-link" %></span>
           <span>|</span>
           <span><%= link_to "投稿順",user_path(sort: "posting_order"), class: "btn btn-sm btn-link" %></span>
           <span>|</span>
           <span><%= link_to "高評価順",user_path(sort: "highly_rated"), class: "btn btn-sm btn-link" %></span>
           <span>|</span>
           <span><%= link_to "低評価順",user_path(sort: "low_rating"), class: "btn btn-sm btn-link" %></span>
        </div>
    </div>


    <% @books.each do |book| %>
    <div class="row border-top">
      <div class="col-md-2 offset-3 mt-5">
          <%= link_to book_path(book) , class:"shadow-lg" do %>
            <% if book.book_image.attached? %>
              <%= image_tag book.book_image, size:"120x140" %>
            <% else %>
              <%= image_tag asset_path('no_image.jpg'), size:"120x140" %>
            <% end %>
          <% end %>
      </div>
      <div class="col-md-7 mt-5">
          <ul>
              <li class="mb-3 list-unstyled"><strong><i class="fas fa-book"></i>   <%= book.title %></strong></li>
              <li class="mb-3 list-unstyled"><i class="fas fa-pen"></i><strong>   <%= book.author %></strong></li>
              <li class="mb-3 list-unstyled"><strong>ジャンル：</strong><%= book.genre %></li>
              <li class="mb-3 list-unstyled"><strong>レビュー：</strong><%=book.body %></li>
              <li class="mb-3 list-unstyled"><%= render "books/static_rate", book: book %></li>
              <li class="mb-3 list-unstyled"><i class="fas fa-calendar-day"></i>   <%=book.created_at.strftime("%Y/%m/%d") %></li>
              <li class="mb-3 list-unstyled"><i class="fas fa-heart" aria-hidden="true" style="color: red;"></i>   <%= book.favorites.count %></li>
              <li class="mb-3 list-unstyled">
                  <%= link_to book_path(book), class:"text-dark" do %>
                     <%= render "book_comments/count", book: book %>
                  <% end %>
              </li>
              <li class="mb-3 list-unstyled"><i class="fas fa-hand-point-right"></i> <strong>点数</strong>   <%= book.score %></li>
              <li class="mb-3 list-unstyled">
                  <% if @user.id == current_user.id %>
                      <p>
                          <%= link_to "編集", edit_book_path(book), class:"btn btn-outline-success btn-sm" %>
                          <%= link_to "削除", book_path(book), method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-outline-danger btn-sm" %></p>
                  <% end %>
              </li>
          </ul>
      </div>
    </div>
    <% end %>
    <div class="d-flex justify-content-center mt-3"><%= paginate @books %></div>
</div>
